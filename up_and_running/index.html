<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="shortcut icon" href="../img/favicon.ico">
  <title>Up and Running - CIDER: The Clojure Interactive Development Environment that Rocks</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../css/highlight.css">
  <link href="../css/extra.css" rel="stylesheet">
  
  <script>
    // Current page data
    var mkdocs_page_name = "Up and Running";
    var mkdocs_page_input_path = "up_and_running.md";
    var mkdocs_page_url = "/up_and_running/";
  </script>
  
  <script src="../js/jquery-2.1.1.min.js"></script>
  <script src="../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../js/highlight.pack.js"></script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> CIDER: The Clojure Interactive Development Environment that Rocks</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <a class="" href="..">Home</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../installation/">Installation</a>
	    </li>
          
            <li class="toctree-l1 current">
		
    <a class="current" href="./">Up and Running</a>
    <ul class="subnav">
            
    <li class="toctree-l2"><a href="#setting-up-a-leiningen-or-boot-project-optional">Setting up a Leiningen or Boot project (optional)</a></li>
    

    <li class="toctree-l2"><a href="#launch-an-nrepl-server-and-client-from-emacs">Launch an nREPL server and client from Emacs</a></li>
    

    <li class="toctree-l2"><a href="#connect-to-a-running-nrepl-server">Connect to a running nREPL server</a></li>
    

    <li class="toctree-l2"><a href="#clojurescript-usage">ClojureScript usage</a></li>
    
        <ul>
        
            <li><a class="toctree-l3" href="#browser-connected-clojurescript-repl">Browser-connected ClojureScript REPL</a></li>
        
            <li><a class="toctree-l3" href="#browser-connected-clojurescript-repl-in-boot-project">Browser-connected ClojureScript REPL in Boot project</a></li>
        
            <li><a class="toctree-l3" href="#using-the-figwheel-repl-leiningen-only">Using the Figwheel REPL (Leiningen-only)</a></li>
        
        </ul>
    

    <li class="toctree-l2"><a href="#working-with-cljc-files">Working with .cljc files</a></li>
    

    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../interactive_programming/">Interactive Programming</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../using_the_repl/">Using the REPL</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../code_completion/">Code Completion</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../navigating_stacktraces/">Navigating Stacktraces</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../running_tests/">Running Tests</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../debugging/">Debugging</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../managing_connections/">Managing Connections</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../miscellaneous_features/">Miscellaneous Features</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../configuration/">Configuration</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../indent_spec/">Indentation Specification</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../additional_packages/">Additional Packages</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../caveats/">Caveats</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../troubleshooting/">Troubleshooting</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../faq/">FAQ</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../additional_resources/">Additional Resources</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../hacking_on_cider/">Hacking on CIDER</a>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">About</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../about/team/">Team</a>
                </li>
                <li class="">
                    
    <a class="" href="../about/support/">Support</a>
                </li>
                <li class="">
                    
    <a class="" href="../about/contributing/">Contributing</a>
                </li>
                <li class="">
                    
    <a class="" href="../about/release_policy/">Release Policy</a>
                </li>
                <li class="">
                    
    <a class="" href="../about/changelog/">Changelog</a>
                </li>
                <li class="">
                    
    <a class="" href="../about/logo/">Logo</a>
                </li>
                <li class="">
                    
    <a class="" href="../about/license/">License</a>
                </li>
    </ul>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">CIDER: The Clojure Interactive Development Environment that Rocks</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
    
    <li>Up and Running</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/clojure-emacs/cider/edit/master/docs/up_and_running.md"
          class="icon icon-github"> Edit on GitHub</a>
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <p>The only requirement to use CIDER is to have an nREPL server to which it may
connect. Many Clojurians favour the use of tools like Leiningen, Boot or Gradle
to start an nREPL server, but the use of one of them is not a prerequisite to
use CIDER (however, it <em>is</em> required if you want to use the <code>cider-jack-in</code>
command).</p>
<h2 id="setting-up-a-leiningen-or-boot-project-optional">Setting up a Leiningen or Boot project (optional)</h2>
<p><a href="http://leiningen.org/">Leiningen</a> is the de-facto standard build/project
management tool for Clojure. <a href="http://boot-clj.com/">Boot</a> is a newer build tool
offering abstractions and libraries to construct more complex build
scenarios. Both have a similar scope to the Maven build tool favoured by Java
developers (and they actually reuse many things from the Maven ecosystem).</p>
<p>CIDER features a command called <code>cider-jack-in</code> that will start an nREPL server
for a particular Leiningen or Boot project and connect to it automatically.
This functionality depends on Leiningen 2.5.2+ or Boot
2.7.0+. Older versions are not supported. For Leiningen, follow the installation
instructions on its web site to get it up and running and afterwards create a
project like this:</p>
<pre><code>$ lein new demo
</code></pre>

<p>The two main ways to obtain an nREPL connection are discussed in the following sections of the manual.</p>
<h2 id="launch-an-nrepl-server-and-client-from-emacs">Launch an nREPL server and client from Emacs</h2>
<p>Simply open in Emacs a file belonging to your <code>lein</code> or <code>boot</code> project (like
<code>foo.clj</code>) and type <kbd>M-x</kbd> <code>cider-jack-in</code> <kbd>RET</kbd>. This will
start an nREPL server with all the project dependencies loaded in and CIDER will
automatically connect to it.</p>
<p>Alternatively you can use <kbd>C-u M-x</kbd> <code>cider-jack-in</code> <kbd>RET</kbd> to
specify the name of a <code>lein</code> or <code>boot</code> project, without having to visit any file
in it. This option is also useful if your project contains both <code>project.clj</code>
and <code>build.boot</code> and you want to launch a repl for one or the other.</p>
<p>In Clojure(Script) buffers the command <code>cider-jack-in</code> is bound to <kbd>C-c M-j</kbd>.</p>
<p>For further customizing the command line used for <code>cider-jack-in</code>, you can
change the following (all string options):</p>
<ul>
<li><code>cider-lein-global-options</code>, <code>cider-boot-global-options</code>, <code>cider-gradle-global-options</code>: these are passed to the command directly, in first position (e.g. <code>-o</code> to <code>lein</code> enables offline mode).</li>
<li><code>cider-lein-parameters</code>, <code>cider-boot-parameters</code>, <code>cider-gradle-parameters</code>: these are usually tasks names and their parameters (e.g.: <code>dev</code> for launching boot's dev task instead of the standard <code>repl -s  wait</code>).</li>
</ul>
<h2 id="connect-to-a-running-nrepl-server">Connect to a running nREPL server</h2>
<p>You can go to your project's directory in a terminal and type there:</p>
<pre><code>$ lein repl
</code></pre>

<p>Or:</p>
<pre><code>$ boot repl -s wait (or whatever task launches a repl)
</code></pre>

<p>Alternatively you can start nREPL either manually or by the facilities provided by your
project's build tool (Maven, etc).</p>
<p>After you get your nREPL server running go back to Emacs.  Typing there
<kbd>M-x</kbd> <code>cider-connect</code> <kbd>RET</kbd> will allow you to connect to the
running nREPL server.</p>
<p>In Clojure(Script) buffers the command <code>cider-connect</code> is bound to <kbd>C-c M-c</kbd>.</p>
<p>You can configure known endpoints used by the <code>cider-connect</code> command offered
via a completing read. This is useful if you have a list of common host/ports
you want to establish remote nREPL connections to. Using an optional label is
helpful for identifying each host.</p>
<pre><code class="el">(setq cider-known-endpoints '((&quot;host-a&quot; &quot;10.10.10.1&quot; &quot;7888&quot;) (&quot;host-b&quot; &quot;7888&quot;)))
</code></pre>

<h2 id="clojurescript-usage">ClojureScript usage</h2>
<p>ClojureScript support relies on the <a href="https://github.com/cemerick/piggieback">piggieback</a> nREPL middleware being
present in your REPL session.</p>
<p>Add the following dependencies to your project (<code>project.clj</code> in Leiningen based project
or <code>built.boot</code> in Boot project):</p>
<pre><code class="clojure">[com.cemerick/piggieback &quot;0.2.1&quot;]
[org.clojure/clojure &quot;1.7.0&quot;]
</code></pre>

<p>as well as <code>piggieback</code> nREPL middleware:</p>
<p>in <code>project.clj</code>:</p>
<pre><code class="clojure">:repl-options {:nrepl-middleware [cemerick.piggieback/wrap-cljs-repl]}
</code></pre>

<p>or in <code>built.boot</code>:</p>
<pre><code class="clojure">(task-options!
  repl {:middleware '[cemerick.piggieback/wrap-cljs-repl]})
</code></pre>

<p>Issue <kbd>M-x</kbd> <code>customize-variable</code> <kbd>RET</kbd> and either
<code>cider-cljs-lein-repl</code>, <code>cider-cljs-boot-repl</code> or <code>cider-cljs-gradle-repl</code> if
you'd like to change the REPL used (the default is <code>rhino</code> where possible).</p>
<p>Open a file in your project and issue <kbd>M-x</kbd>
<code>cider-jack-in-clojurescript</code> <kbd>RET</kbd>. This will start up the nREPL
server, and then create two REPL buffers for you, one in Clojure and one in
ClojureScript. All usual CIDER commands will be automatically directed to the
appropriate REPL, depending on whether you're visiting a <code>.clj</code> or a <code>.cljs</code>
file.</p>
<h3 id="browser-connected-clojurescript-repl">Browser-connected ClojureScript REPL</h3>
<p>Using Weasel, you can also have a browser-connected REPL.</p>
<ol>
<li>
<p>Add <code>[weasel "0.7.0"]</code> to your project's <code>:dependencies</code>.</p>
</li>
<li>
<p>Issue <kbd>M-x</kbd> <code>customize-variable</code> <kbd>RET</kbd> plus either
   <code>cider-cljs-lein-repl</code>, <code>cider-cljs-boot-repl</code> or <code>cider-cljs-gradle-repl</code>
   and choose the <code>Weasel</code> option.</p>
</li>
<li>
<p>Add this to your ClojureScript code:</p>
</li>
</ol>
<pre><code class="clojure">(ns my.cljs.core
  (:require [weasel.repl :as repl]))
(repl/connect &quot;ws://localhost:9001&quot;)
</code></pre>

<ol>
<li>Open a file in your project and issue <kbd>M-x</kbd> <code>cider-jack-in-clojurescript</code>.</li>
</ol>
<p>Provided that a Piggieback-enabled ClojureScript environment is active in your
REPL session, code loading and evaluation will work seamlessly regardless of the
presence of the <code>cider-nrepl</code> middleware. If the middleware is present then most
other features of CIDER will also be enabled (including code completion,
documentation lookup, the namespace browser, and macroexpansion).</p>
<h3 id="browser-connected-clojurescript-repl-in-boot-project">Browser-connected ClojureScript REPL in Boot project</h3>
<ol>
<li>Add this to your dependencies in <code>build.boot</code>:</li>
</ol>
<pre><code class="clojure">[adzerk/boot-cljs        &quot;X.Y.Z&quot;  :scope &quot;test&quot;]
[adzerk/boot-cljs-repl   &quot;X.Y.Z&quot;  :scope &quot;test&quot;]
[pandeiro/boot-http      &quot;X.Y.Z&quot;  :scope &quot;test&quot;]
[weasel                  &quot;0.7.0&quot;  :scope &quot;test&quot;]
[com.cemerick/piggieback &quot;0.2.1&quot;  :scope &quot;test&quot;]
</code></pre>

<p>and this at the end of <code>build.boot</code>:</p>
<pre><code class="clojure">(require
 '[adzerk.boot-cljs :refer [cljs]]
 '[adzerk.boot-cljs-repl :refer [cljs-repl]]
 '[pandeiro.boot-http :refer [serve]])

(deftask dev []
  (comp (serve)
        (watch)
        (cljs-repl) ; order is important!!
        (cljs)))
</code></pre>

<ol>
<li>
<p>Issue <kbd>M-x</kbd> <code>customize-variable</code> <kbd>RET</kbd> <code>cider-boot-parameters</code>
   and insert <code>dev</code>.</p>
</li>
<li>
<p>Open a file in your project and issue <kbd>M-x</kbd> <code>cider-jack-in-clojurescript</code>.</p>
</li>
<li>
<p>Connect to the running server with your browser. The address is printed on the terminal, but it's probably <code>http://localhost:3000</code>.</p>
</li>
</ol>
<p>For more information visit <a href="https://github.com/adzerk-oss/boot-cljs-repl">boot-cljs-repl</a>.</p>
<h3 id="using-the-figwheel-repl-leiningen-only">Using the Figwheel REPL (Leiningen-only)</h3>
<p>You can also use <a href="https://github.com/bhauman/lein-figwheel">Figwheel</a> with CIDER.</p>
<ol>
<li>
<p>Set up Figwheel as normal, but make sure <code>:cljsbuild</code> and <code>:figwheel</code> settings are
   in the root of your Leiningen project definition.</p>
</li>
<li>
<p>Add these to your dev <code>:dependencies</code>:</p>
</li>
</ol>
<pre><code class="clojure">[com.cemerick/piggieback &quot;0.2.1&quot;]
[figwheel-sidecar &quot;0.5.0-2&quot;]
</code></pre>

<ol>
<li>Add this to your dev <code>:repl-options</code>:</li>
</ol>
<pre><code class="clojure">:nrepl-middleware [cemerick.piggieback/wrap-cljs-repl]
</code></pre>

<ol>
<li>Instruct CIDER to use Figwheel in your Emacs config:</li>
</ol>
<pre><code class="el">(setq cider-cljs-lein-repl &quot;(do (use 'figwheel-sidecar.repl-api) (start-figwheel!) (cljs-repl))&quot;)
</code></pre>

<ol>
<li>
<p>Start the REPL with <code>cider-jack-in-clojurescript</code> (<kbd>C-c M-J</kbd>)</p>
</li>
<li>
<p>Open a browser to the Figwheel URL so that it can connect to your application.</p>
</li>
</ol>
<p>You now have two nREPL connections, one for Clojure and one for ClojureScript.
CIDER will determine which to use based on the type of file you're editing.</p>
<p>You should also check out
<a href="https://github.com/bhauman/lein-figwheel/wiki/Using-the-Figwheel-REPL-within-NRepl">Figwheel's wiki</a>.</p>
<h2 id="working-with-cljc-files">Working with <code>.cljc</code> files</h2>
<p>Ordinarily, CIDER dispatches code from <code>clj</code> files to Clojure REPLs and <code>cljs</code>
files to ClojureScript REPLs. However, <code>cljc</code> files have two possible connection
targets. By default, CIDER tries to evaluate <code>cljc</code> files in all matching
connection buffers, both <code>clj</code> and <code>cljs</code> (if present).</p>
<p>Simply put - if you're evaluating the code <code>(+ 2 2)</code> in a <code>cljc</code> file and you
have an active Clojure and and active ClojureScript REPL, then the code is going
to be evaluated 2 times - once for each of them. This behavior might be a bit
confusing, but that's what we came up with, when ruminating what was the most
logical thing to do out-of-the-box.</p>
<p>This can be modified with <kbd>M-x</kbd> <code>cider-toggle-connection-buffer</code>
<kbd>RET</kbd>. Toggling this once will choose one of the connections as the
primary, and successive calls to <kbd>M-x</kbd> <code>cider-toggle-connection-buffer</code>
<kbd>RET</kbd> will alternate which connection to use. To restore evaluation to
both connections, invoke <code>cider-toggle-connection-buffer</code> with a prefix argument
(<kbd>C-u M-x</kbd> <code>cider-toggle-connection-buffer</code> <kbd>RET</kbd>).</p>
<p>If there is only a Clojure connection, no toggling will happen and a message
will inform you that there are no other connections to switch to.</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../interactive_programming/" class="btn btn-neutral float-right" title="Interactive Programming">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../installation/" class="btn btn-neutral" title="Installation"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
      <p>Copyright (C) 2016-2018 Bozhidar Batsov, Artur Malabarba and CIDER contributors</p>
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://github.com/clojure-emacs/cider/" class="fa fa-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../installation/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../interactive_programming/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme.js"></script>
      <script src="../search/require.js"></script>
      <script src="../search/search.js"></script>

</body>
</html>
