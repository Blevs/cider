<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="shortcut icon" href="../img/favicon.ico">
  <title>Running Tests - CIDER: The Clojure Interactive Development Environment that Rocks</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../css/highlight.css">
  <link href="../css/extra.css" rel="stylesheet">
  
  <script>
    // Current page data
    var mkdocs_page_name = "Running Tests";
    var mkdocs_page_input_path = "running_tests.md";
    var mkdocs_page_url = "/running_tests/";
  </script>
  
  <script src="../js/jquery-2.1.1.min.js"></script>
  <script src="../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../js/highlight.pack.js"></script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> CIDER: The Clojure Interactive Development Environment that Rocks</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
	  
          
            <li class="toctree-l1">
		
    <a class="" href="..">Home</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../installation/">Installation</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../up_and_running/">Up and Running</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../interactive_programming/">Interactive Programming</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../using_the_repl/">Using the REPL</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../code_completion/">Code Completion</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../navigating_stacktraces/">Navigating Stacktraces</a>
	    </li>
          
            <li class="toctree-l1 current">
		
    <a class="current" href="./">Running Tests</a>
    <ul class="subnav">
            
    <li class="toctree-l2"><a href="#running-tests">Running tests</a></li>
    
        <ul>
        
            <li><a class="toctree-l3" href="#running-tests-automatically-test-driven-development">Running tests automatically (test-driven development)</a></li>
        
            <li><a class="toctree-l3" href="#using-cider-test-with-alternative-test-libraries">Using cider-test with alternative test libraries</a></li>
        
        </ul>
    

    </ul>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../debugging/">Debugging</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../managing_connections/">Managing Connections</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../miscellaneous_features/">Miscellaneous Features</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../configuration/">Configuration</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../indent_spec/">Indentation Specification</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../additional_packages/">Additional Packages</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../caveats/">Caveats</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../troubleshooting/">Troubleshooting</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../faq/">FAQ</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../additional_resources/">Additional Resources</a>
	    </li>
          
            <li class="toctree-l1">
		
    <a class="" href="../hacking_on_cider/">Hacking on CIDER</a>
	    </li>
          
            <li class="toctree-l1">
		
    <span class="caption-text">About</span>
    <ul class="subnav">
                <li class="">
                    
    <a class="" href="../about/team/">Team</a>
                </li>
                <li class="">
                    
    <a class="" href="../about/support/">Support</a>
                </li>
                <li class="">
                    
    <a class="" href="../about/contributing/">Contributing</a>
                </li>
                <li class="">
                    
    <a class="" href="../about/release_policy/">Release Policy</a>
                </li>
                <li class="">
                    
    <a class="" href="../about/changelog/">Changelog</a>
                </li>
                <li class="">
                    
    <a class="" href="../about/logo/">Logo</a>
                </li>
                <li class="">
                    
    <a class="" href="../about/license/">License</a>
                </li>
    </ul>
	    </li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">CIDER: The Clojure Interactive Development Environment that Rocks</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
    
    <li>Running Tests</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/clojure-emacs/cider/edit/master/docs/running_tests.md"
          class="icon icon-github"> Edit on GitHub</a>
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h2 id="running-tests">Running tests</h2>
<p>You can run <code>clojure.test</code> tests pretty quickly in CIDER. Pressing <kbd>C-c C-t
n</kbd> or <kbd>C-c C-t C-n</kbd> in a source buffer or a REPL buffer will run
the tests for the namespace you're currently in. CIDER is smart enough to figure
out the namespace containing the tests. The inference logic works in a pretty
simple manner - if you're in an implementation namespace (e.g. <code>some.ns</code>) CIDER
will try to find a matching test namespace (by default <code>some.ns-test</code>) and run
the tests there. On the other hand - if you're in something that looks like a
test namespace (e.g. <code>some.ns-test</code>), then the command will simply run the tests
in that namespace. From time to time, however, you might want to suppress the
test namespace inference logic (e.g. you have some tests in the implementation
namespace that were defined with <code>clojure.test/with-test</code>)
- in such cases you should use <kbd>C-u C-c C-t C-n</kbd>, which will simply run
whatever tests are present in the currently visited/active namespace.</p>
<p>You can also run all loaded tests with <kbd>C-c C-t l</kbd> or <kbd>C-c C-t
C-l</kbd> and all tests within a project with <kbd>C-c C-t p</kbd> or <kbd>C-c
C-t C-p</kbd> (note that this will load <strong>all</strong> namespaces in your
project). Using <kbd>C-c C-t t</kbd> or <kbd>C-c C-t C-t</kbd>, you can execute
only the test a point.</p>
<p>All test commands are available in REPL buffers as well. There you can also use
<kbd>,</kbd> to invoke some of the testing commands.</p>
<p>In the buffer displaying the test execution results (<code>*cider-test-results*</code>)
you'll have a bit of additional functionality at your disposal.</p>
<table>
<thead>
<tr>
<th>Keyboard shortcut</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><kbd>g</kbd></td>
<td>Run test at point.</td>
</tr>
<tr>
<td><kbd>n</kbd></td>
<td>Run tests for current namespace.</td>
</tr>
<tr>
<td><kbd>l</kbd></td>
<td>Run tests for all loaded namespaces.</td>
</tr>
<tr>
<td><kbd>p</kbd></td>
<td>Run tests for all project namespaces. This loads the additional namespaces.</td>
</tr>
<tr>
<td><kbd>f</kbd></td>
<td>Re-run test failures/errors.</td>
</tr>
<tr>
<td><kbd>M-p</kbd></td>
<td>Move point to previous test.</td>
</tr>
<tr>
<td><kbd>M-n</kbd></td>
<td>Move point to next test.</td>
</tr>
<tr>
<td><kbd>t</kbd> or <kbd>M-.</kbd></td>
<td>Jump to test definition.</td>
</tr>
<tr>
<td><kbd>d</kbd></td>
<td>Display diff of actual vs expected.</td>
</tr>
<tr>
<td><kbd>e</kbd></td>
<td>Display test error cause and stacktrace info.</td>
</tr>
</tbody>
</table>
<p>Certain aspects of the test execution behavior are configurable:</p>
<ul>
<li>
<p>If your tests are not following the <code>some.ns-test</code> naming convention you can
customize the variable <code>cider-test-infer-test-ns</code>. It should be bound to a
function that takes the current namespace and returns the matching test
namespace (which may be the same as the current namespace).</p>
</li>
<li>
<p>If your individual tests are not defined by <code>deftest</code> or <code>defspec</code>, CIDER will
not recognize them when searching for a test at point in <code>cider-test-run-test</code>.
You can customize the variable <code>cider-test-defining-forms</code> to add additional
forms for CIDER to recognize as individual test definitions.</p>
</li>
<li>
<p>If you want to view the test report regardless of whether the tests have
passed or failed:</p>
</li>
</ul>
<pre><code class="el">(setq cider-test-show-report-on-success t)
</code></pre>

<h3 id="running-tests-automatically-test-driven-development">Running tests automatically (test-driven development)</h3>
<p>CIDER provides a minor-mode that automatically runs all tests for a namespace
whenever you load a file (with <kbd>C-c C-k</kbd>). You can toggle it
manually with <kbd>M-x</kbd> <code>cider-auto-test-mode</code>, or you can use:</p>
<pre><code class="el">(cider-auto-test-mode 1)
</code></pre>

<p>This is completely equivalent to manually typing <kbd>C-c C-t C-n</kbd> every
time you load a Clojure buffer. Also, as described above before, CIDER is smart
enough to figure out the namespace containing the tests.</p>
<h3 id="using-cider-test-with-alternative-test-libraries">Using cider-test with alternative test libraries</h3>
<p>The <code>clojure.test</code> machinery is designed to be pluggable. Any test library
can implement it if so desired, and therefore leverage <code>cider-test</code>. For
instance, <a href="https://github.com/clojure/test.check/">test.check</a> does this, and
<code>cider-test</code> handles <code>defspec</code> just like <code>deftest</code>.</p>
<p>As a test framework author, supporting the built-in <code>clojure.test</code> machinery
(and hence <code>cider-test</code>) is pretty straightforward:</p>
<ol>
<li>Assoc each test fn as <code>:test</code> metadata on some var. These are what get run.</li>
<li>Implement the <code>clojure.test/report</code> multimethod to capture the test results.</li>
</ol>
<p>The <code>test.check</code> library is a good example here. It was also designed completely
independently of <code>clojure.test</code>. It just adds compatibility in this
<a href="https://github.com/clojure/test.check/blob/24f74b83f1c7a032f98efdcc1db9d74b3a6a794d/src/main/clojure/clojure/test/check/clojure_test.cljc">namespace</a>.</p>
<p><a href="https://github.com/clojure-expectations/expectations">clojure-expectations</a> added
support for <code>clojure.test</code> in version 2.2 and should also work with CIDER.</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../debugging/" class="btn btn-neutral float-right" title="Debugging">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../navigating_stacktraces/" class="btn btn-neutral" title="Navigating Stacktraces"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
      <p>Copyright (C) 2016-2018 Bozhidar Batsov, Artur Malabarba and CIDER contributors</p>
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
      
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://github.com/clojure-emacs/cider/" class="fa fa-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../navigating_stacktraces/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../debugging/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme.js"></script>
      <script src="../search/require.js"></script>
      <script src="../search/search.js"></script>

</body>
</html>
