<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../img/favicon.ico">
        <title>Running Tests - CIDER: The Clojure Interactive Development Environment that Rocks</title>
        <link href="../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../css/font-awesome-4.5.0.css" rel="stylesheet">
        <link href="../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="../css/highlight.css">
        <link href="../css/extra.css" rel="stylesheet">
        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->

        <script src="../js/jquery-1.10.2.min.js"></script>
        <script src="../js/bootstrap-3.0.3.min.js"></script>
        <script src="../js/highlight.pack.js"></script> 
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="..">CIDER: The Clojure Interactive Development Environment that Rocks</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                    <li >
                        <a href="..">Home</a>
                    </li>
                    <li >
                        <a href="../installation/">Installation</a>
                    </li>
                    <li >
                        <a href="../up_and_running/">Up and Running</a>
                    </li>
                    <li >
                        <a href="../interactive_programming/">Interactive Programming</a>
                    </li>
                    <li >
                        <a href="../using_the_repl/">Using the REPL</a>
                    </li>
                    <li >
                        <a href="../code_completion/">Code Completion</a>
                    </li>
                    <li >
                        <a href="../navigating_stacktraces/">Navigating Stacktraces</a>
                    </li>
                    <li class="active">
                        <a href="./">Running Tests</a>
                    </li>
                    <li >
                        <a href="../debugging/">Debugging</a>
                    </li>
                    <li >
                        <a href="../managing_connections/">Managing Connections</a>
                    </li>
                    <li >
                        <a href="../miscellaneous_features/">Miscellaneous Features</a>
                    </li>
                    <li >
                        <a href="../configuration/">Configuration</a>
                    </li>
                    <li >
                        <a href="../indent_spec/">Indentation Specification</a>
                    </li>
                    <li >
                        <a href="../additional_packages/">Additional Packages</a>
                    </li>
                    <li >
                        <a href="../caveats/">Caveats</a>
                    </li>
                    <li >
                        <a href="../troubleshooting/">Troubleshooting</a>
                    </li>
                    <li >
                        <a href="../faq/">FAQ</a>
                    </li>
                    <li >
                        <a href="../additional_resources/">Additional Resources</a>
                    </li>
                    <li >
                        <a href="../hacking_on_cider/">Hacking on CIDER</a>
                    </li>
                    <li class="dropdown">
                        <a href="#" class="dropdown-toggle" data-toggle="dropdown">About <b class="caret"></b></a>
                        <ul class="dropdown-menu">
                            
<li >
    <a href="../about/team/">Team</a>
</li>
                            
<li >
    <a href="../about/support/">Support</a>
</li>
                            
<li >
    <a href="../about/contributing/">Contributing</a>
</li>
                            
<li >
    <a href="../about/release_policy/">Release Policy</a>
</li>
                            
<li >
    <a href="../about/changelog/">Changelog</a>
</li>
                            
<li >
    <a href="../about/logo/">Logo</a>
</li>
                            
<li >
    <a href="../about/license/">License</a>
</li>
                        </ul>
                    </li>
                </ul>

            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i> Search
                    </a>
                </li>
                    <li >
                        <a rel="next" href="../navigating_stacktraces/">
                            <i class="fa fa-arrow-left"></i> Previous
                        </a>
                    </li>
                    <li >
                        <a rel="prev" href="../debugging/">
                            Next <i class="fa fa-arrow-right"></i>
                        </a>
                    </li>
                    <li>
                        <a href="https://github.com/clojure-emacs/cider/edit/master/docs/running_tests.md"><i class="fa fa-github"></i> Edit on GitHub</a>
                    </li>
            </ul>
        </div>
    </div>
</div>

        <div class="container">
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
        <li class="main active"><a href="#running-tests">Running tests</a></li>
            <li><a href="#running-tests-automatically-test-driven-development">Running tests automatically (test-driven development)</a></li>
            <li><a href="#using-cider-test-with-alternative-test-libraries">Using cider-test with alternative test libraries</a></li>
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<h2 id="running-tests">Running tests</h2>
<p>You can run <code>clojure.test</code> tests pretty quickly in CIDER. Pressing <kbd>C-c C-t
n</kbd> or <kbd>C-c C-t C-n</kbd> in a source buffer or a REPL buffer will run
the tests for the namespace you're currently in. CIDER is smart enough to figure
out the namespace containing the tests. The inference logic works in a pretty
simple manner - if you're in an implementation namespace (e.g. <code>some.ns</code>) CIDER
will try to find a matching test namespace (by default <code>some.ns-test</code>) and run
the tests there. On the other hand - if you're in something that looks like a
test namespace (e.g. <code>some.ns-test</code>), then the command will simply run the tests
in that namespace. From time to time, however, you might want to suppress the
test namespace inference logic (e.g. you have some tests in the implementation
namespace that were defined with <code>clojure.test/with-test</code>)
- in such cases you should use <kbd>C-u C-c C-t C-n</kbd>, which will simply run
whatever tests are present in the currently visited/active namespace.</p>
<p>You can also run all loaded tests with <kbd>C-c C-t l</kbd> or <kbd>C-c C-t
C-l</kbd> and all tests within a project with <kbd>C-c C-t p</kbd> or <kbd>C-c
C-t C-p</kbd> (note that this will load <strong>all</strong> namespaces in your
project). Using <kbd>C-c C-t t</kbd> or <kbd>C-c C-t C-t</kbd>, you can execute
only the test a point.</p>
<p>All test commands are available in REPL buffers as well. There you can also use
<kbd>,</kbd> to invoke some of the testing commands.</p>
<p>In the buffer displaying the test execution results (<code>*cider-test-results*</code>)
you'll have a bit of additional functionality at your disposal.</p>
<table>
<thead>
<tr>
<th>Keyboard shortcut</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><kbd>g</kbd></td>
<td>Run test at point.</td>
</tr>
<tr>
<td><kbd>n</kbd></td>
<td>Run tests for current namespace.</td>
</tr>
<tr>
<td><kbd>l</kbd></td>
<td>Run tests for all loaded namespaces.</td>
</tr>
<tr>
<td><kbd>p</kbd></td>
<td>Run tests for all project namespaces. This loads the additional namespaces.</td>
</tr>
<tr>
<td><kbd>f</kbd></td>
<td>Re-run test failures/errors.</td>
</tr>
<tr>
<td><kbd>M-p</kbd></td>
<td>Move point to previous test.</td>
</tr>
<tr>
<td><kbd>M-n</kbd></td>
<td>Move point to next test.</td>
</tr>
<tr>
<td><kbd>t</kbd> or <kbd>M-.</kbd></td>
<td>Jump to test definition.</td>
</tr>
<tr>
<td><kbd>d</kbd></td>
<td>Display diff of actual vs expected.</td>
</tr>
<tr>
<td><kbd>e</kbd></td>
<td>Display test error cause and stacktrace info.</td>
</tr>
</tbody>
</table>
<p>Certain aspects of the test execution behavior are configurable:</p>
<ul>
<li>
<p>If your tests are not following the <code>some.ns-test</code> naming convention you can
customize the variable <code>cider-test-infer-test-ns</code>. It should be bound to a
function that takes the current namespace and returns the matching test
namespace (which may be the same as the current namespace).</p>
</li>
<li>
<p>If your individual tests are not defined by <code>deftest</code> or <code>defspec</code>, CIDER will
not recognize them when searching for a test at point in <code>cider-test-run-test</code>.
You can customize the variable <code>cider-test-defining-forms</code> to add additional
forms for CIDER to recognize as individual test definitions.</p>
</li>
<li>
<p>If you want to view the test report regardless of whether the tests have
passed or failed:</p>
</li>
</ul>
<pre><code class="el">(setq cider-test-show-report-on-success t)
</code></pre>

<h3 id="running-tests-automatically-test-driven-development">Running tests automatically (test-driven development)</h3>
<p>CIDER provides a minor-mode that automatically runs all tests for a namespace
whenever you load a file (with <kbd>C-c C-k</kbd>). You can toggle it
manually with <kbd>M-x</kbd> <code>cider-auto-test-mode</code>, or you can use:</p>
<pre><code class="el">(cider-auto-test-mode 1)
</code></pre>

<p>This is completely equivalent to manually typing <kbd>C-c C-t C-n</kbd> every
time you load a Clojure buffer. Also, as described above before, CIDER is smart
enough to figure out the namespace containing the tests.</p>
<h3 id="using-cider-test-with-alternative-test-libraries">Using cider-test with alternative test libraries</h3>
<p>The <code>clojure.test</code> machinery is designed to be pluggable. Any test library
can implement it if so desired, and therefore leverage <code>cider-test</code>. For
instance, <a href="https://github.com/clojure/test.check/">test.check</a> does this, and
<code>cider-test</code> handles <code>defspec</code> just like <code>deftest</code>.</p>
<p>As a test framework author, supporting the built-in <code>clojure.test</code> machinery
(and hence <code>cider-test</code>) is pretty straightforward:</p>
<ol>
<li>Assoc each test fn as <code>:test</code> metadata on some var. These are what get run.</li>
<li>Implement the <code>clojure.test/report</code> multimethod to capture the test results.</li>
</ol>
<p>The <code>test.check</code> library is a good example here. It was also designed completely
independently of <code>clojure.test</code>. It just adds compatibility in this
<a href="https://github.com/clojure/test.check/blob/24f74b83f1c7a032f98efdcc1db9d74b3a6a794d/src/main/clojure/clojure/test/check/clojure_test.cljc">namespace</a>.</p>
<p><a href="https://github.com/clojure-expectations/expectations">clojure-expectations</a> added
support for <code>clojure.test</code> in version 2.2 and should also work with CIDER.</p></div>
        </div>

        <footer class="col-md-12">
            <hr>
                <p>Copyright (C) 2016-2018 Bozhidar Batsov, Artur Malabarba and CIDER contributors</p>
            <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>var base_url = '..';</script>
        <script src="../js/base.js"></script>
        <script src="../search/require.js"></script>
        <script src="../search/search.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Search</h4>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form role="form">
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="Keyboard Shortcuts Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Keyboard Shortcuts</h4>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td><kbd>&larr;</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td><kbd>&rarr;</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>


    </body>
</html>
